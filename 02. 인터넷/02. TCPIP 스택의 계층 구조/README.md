## TCP/IP 스택의 계층 구조

</br>

### 2.2.1 TCP/IP 스택 장점

목적에 따라 여러 프로토콜을 갈아 끼울 수 있게 **계층을 추상화하여 나누고**, 각 계층이 소임에 충실할 수 있게 설계했다.

따라서 각기 독립된 계층이 다른 계층을 뒷받침하고 **데이터를 적절히 연계**할 수 있다.

</br>

### 2.2.2 TCP/IP 스택 단점

프로토콜 작성자마다 성능, 확장성을 핑계로, 쓸모 있긴 하지만 설계 철학에 반하는 복잡한 예외사항으로 범벅을 해 두었다.

</br>

### 2.2.3 게임에서의 TCP/IP 스택

멀티플레이어 게임 개발자로서 TCP/IP 스택의 장점과 단점을 이해하여, 게임이 효율적으로 동작하게 만들어야 한다.

게임 제작에는 주로 **TCP/IP의 상위 계층을 다루게 된다**.

하지만 최적화를 위해서는 하위 계층이 어떻게 동작하고, 상위 계층과 어떤 식으로 상호작용하는지도 알아두면 좋다.

</br>

OSI 모형에서는 물리 계층, 데이터링크 계층, 네트워크 계층, 세션 계층, 표현 계층, 응용 계층으로 7 계층으로 구분한다.

하지만 게임 개발과 관련이 있는 것으로 몇몇을 묶어 **물리 계층, 링크 계층, 네트워크 계층, 전송 계층, 응용 계층으로 구분**하도록 하자.

</br>

![화면 캡처 2024-11-13 132056](https://github.com/user-attachments/assets/8601c314-81b9-471c-a421-e9234681d267)

</br>

### 2.2.4 계층의 역할

각 계층은 저마다 상위 계층을 지원하기 위해 수행해야 하는 역할이 있다. 대표적으로 다음과 같다.

1. 상위 계층에서 데이터 블록을 수신한다.

2. 계층 헤더를 추가해(필요 시 푸터도 추가해) 패킷을 꾸린다.

3. 데이터를 하위 계층으로 전달해 송신 과정을 이어간다.

4. 하위 계층에서 수신된 데이터를 받는다.

5. 헤더를 제거하여 수신된 데이터의 패킷을 푼다.

6. 수신된 데이터를 상위 계층으로 전달해 수신 처리를 이어간다.

</br>

그렇지만 각 계층이 구체적으로 어떤 식으로 역할을 수행해야 하는지 정해져 있지는 않다.

각 계층마다 다양한 프로토콜이 있어 그 중 하나로 역할을 수행하는데, 개중엔 TCP/IP처럼 오래된 것도 있고 최근 새로 별명된 것도 있다.

OOP 개념에 익숙하다면 **계층은 인터페이스, 프로토콜은 인터페이스를 구체화한 구현 클래스 정도**로 생각하면 좋다.
